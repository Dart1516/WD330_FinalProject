/* =========================================================
   EMBLEM BAR — CSS unificado (con tokens globales + badges)
   ---------------------------------------------------------
   - Reutiliza los mismos gradientes y máscaras para:
     a) la barra de emblemas
     b) los “badges” del pop-up (.popover .badge)
   - No modifica tus rutas de íconos PNG.
   ========================================================= */

/* =========================================================
   0) TOKENS GLOBALES (disponibles en toda la página)
   ========================================================= */
:root {
    /* Glow (puedes usarlo en sombras del UI) */
    --glow: rgba(167, 121, 255, .9);
    --glow-soft: rgba(167, 121, 255, .35);

    /* Roles */
    --c-assmelee: linear-gradient(180deg, #c48cff, #7a35ff);
    --c-assranged: linear-gradient(180deg, #ff8a8a, #ff3b3b);
    --c-healer: linear-gradient(180deg, #b8ff8a, #3edb5a);
    --c-support: linear-gradient(180deg, #ffc07a, #ff7a1a);
    --c-tank: linear-gradient(180deg, #ffe36e, #ffb800);
    --c-warrior: linear-gradient(180deg, #86c5ff, #2a8dff);

    /* Universos */
    --c-diablo: linear-gradient(180deg, #ff9b6a, #ff3b0a);
    --c-nexus: linear-gradient(180deg, #cfa8ff, #8e5bff);
    --c-overwatch: linear-gradient(180deg, #1f1f1f 0%, #f99e1a 55%, #f9ae2b 100%);
    --c-starcraft: linear-gradient(180deg, #a7d4ff, #4db2ff);
    --c-warcraft: linear-gradient(180deg, #ffd766, #d6a300);
}

/* =========================================================
   1) SCOPE & TOKENS (solo para el componente de la barra)
   ---------------------------------------------------------
   - Variables propias del #emblem-bar
   - OFF: morado uniforme (opaco ~72%)
   ========================================================= */
#emblem-bar {
    /* Separación visual entre grupos (roles / universos) */
    --group-gap: clamp(12px, 2vw, 24px);

    /* Tamaño base de los iconos */
    --size: 44px;

    /* Aspecto cuando está “apagado” (sin hover/active) */
    --off-fill: linear-gradient(180deg, #7a6ac0, #3f2f67);
    --off-opacity: .72;
}

/* =========================================================
   2) LAYOUT
   ---------------------------------------------------------
   - Fila única con scroll horizontal si hace falta
   ========================================================= */
#emblem-bar .emblem-bar__grid {
    display: flex;
    flex-wrap: nowrap;
    /* una sola fila */
    gap: 10px;
    list-style: none;
    margin: 0;
    overflow-x: auto;
    /* scroll horizontal */
    padding: 2px;
    scrollbar-width: thin;
}

/* =========================================================
   3) COMPONENT CORE
   ---------------------------------------------------------
   - Contenedor, imagen base, capa de color enmascarada
   - OFF: morado uniforme “atenuado”
   ========================================================= */
#emblem-bar .emblem {
    cursor: pointer;
    display: grid;
    place-items: center;
    position: relative;
    width: var(--size);
    height: var(--size);
    transition: filter .18s ease, transform .18s ease;
}

#emblem-bar .emblem img {
    height: 100%;
    width: 100%;
    object-fit: contain;
    filter: grayscale(1) saturate(0) brightness(1.12) contrast(1.08);
    opacity: .96;
    transition: filter .22s ease, opacity .22s ease, transform .22s ease;
}

/* Capa coloreada con máscara:
   OFF usa --off-fill; ON usa --fill (por rol/universo) */
#emblem-bar .ink {
    position: absolute;
    inset: 0;
    pointer-events: none;
    background: var(--off-fill);
    opacity: var(--off-opacity);
    /* ~70% visible cuando OFF */
    -webkit-mask: var(--mask) center/contain no-repeat;
    mask: var(--mask) center/contain no-repeat;
    filter: brightness(1.04) contrast(1.06);
    transition: background .22s ease, filter .22s ease, opacity .22s ease;
}

/* =========================================================
   4) STATES
   ---------------------------------------------------------
   - Hover/Active: glow + color de ítem
   ========================================================= */
#emblem-bar .emblem:hover,
#emblem-bar .emblem.active {
    filter:
        drop-shadow(0 0 10px var(--glow-soft)) drop-shadow(0 0 18px var(--glow));
    transform: translateY(-1px);
}

#emblem-bar .emblem:hover .ink,
#emblem-bar .emblem.active .ink {
    background: var(--fill);
    /* cambia a color del ítem */
    opacity: 1;
    filter:
        brightness(1.2) contrast(1.24) saturate(1.22) drop-shadow(0 0 10px var(--glow));
}

#emblem-bar .emblem:hover img,
#emblem-bar .emblem.active img {
    filter: grayscale(.15) brightness(1.1) contrast(1.16);
    opacity: 1;
    transform: scale(1.02);
}

/* =========================================================
   5) ROLE COLORS (clase global en cualquier elemento)
   ---------------------------------------------------------
   - Aplica exactamente una por ítem
   ========================================================= */
.role-ass-melee {
    --fill: var(--c-assmelee);
}

.role-ass-range {
    --fill: var(--c-assranged);
}

.role-healer {
    --fill: var(--c-healer);
}

.role-support {
    --fill: var(--c-support);
}

.role-tank {
    --fill: var(--c-tank);
}

.role-warrior {
    --fill: var(--c-warrior);
}

/* =========================================================
   6) UNIVERSE COLORS (clase global en cualquier elemento)
   ---------------------------------------------------------
   - Overwatch usa degradado negro+naranja
   ========================================================= */
.uni-diablo {
    --fill: var(--c-diablo);
}

.uni-nexus {
    --fill: var(--c-nexus);
}

.uni-overwatch {
    --fill: var(--c-overwatch);
}

.uni-starcraft {
    --fill: var(--c-starcraft);
}

.uni-warcraft {
    --fill: var(--c-warcraft);
}

/* =========================================================
   7) RESPONSIVE
   ---------------------------------------------------------
   - Escala el tamaño de icono (no global)
   ========================================================= */
#emblem-bar .emblem.uni-warcraft {
    margin-inline-start: var(--group-gap);
}

@media (max-width: 1200px) {
    #emblem-bar {
        --size: 40px;
    }
}

@media (max-width: 900px) {
    #emblem-bar {
        --size: 36px;
    }
}

@media (max-width: 700px) {
    #emblem-bar {
        --size: 32px;
    }
}

/* =========================================================
   8) MASK SOURCES (GLOBALES)
   ---------------------------------------------------------
   - Define --mask por clase (rutas iguales a tus PNG)
   - Elimina cualquier style="--mask: …" inline en HTML
   ========================================================= */

/* Roles */
.role-tank {
    --mask: url('../../assets/icons/roles/01_tank-removebg-preview.png');
}

.role-warrior {
    --mask: url('../../assets/icons/roles/02_guerrero-removebg-preview.png');
}

.role-ass-range {
    --mask: url('../../assets/icons/roles/03_distancia-removebg-preview.png');
}

.role-ass-melee {
    --mask: url('../../assets/icons/roles/04_mele-removebg-preview.png');
}

/* “mele” */
.role-healer {
    --mask: url('../../assets/icons/roles/05_sanador-removebg-preview.png');
}

.role-support {
    --mask: url('../../assets/icons/roles/06_apoyo-removebg-preview.png');
}

/* Universos */
.uni-warcraft {
    --mask: url('../../assets/icons/universes/07_warcraft-removebg-preview.png');
}

.uni-starcraft {
    --mask: url('../../assets/icons/universes/08_starcraft-removebg-preview.png');
}

.uni-diablo {
    --mask: url('../../assets/icons/universes/09_diablo-removebg-preview.png');
}

.uni-overwatch {
    --mask: url('../../assets/icons/universes/10_overwatch-removebg-preview.png');
}

.uni-nexus {
    --mask: url('../../assets/icons/universes/11_nexo-removebg-preview.png');
}

/* =========================================================
   9) BADGE PARA EL POP-UP
   ---------------------------------------------------------
   - Iconito coloreado que reutiliza --fill + --mask
   - Úsalo con: <span class="badge role-healer"></span> etc.
   ========================================================= */
.popover .badge {
    display: inline-block;
    inline-size: 28px;
    block-size: 28px;
    vertical-align: -6px;
    background: var(--fill, #999);
    -webkit-mask: var(--mask) center/contain no-repeat;
    mask: var(--mask) center/contain no-repeat;
    filter: drop-shadow(0 0 6px var(--glow-soft));
    margin-inline-end: 8px;
}