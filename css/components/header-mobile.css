@import url('../variables.css');

 @media (max-width: 900px) {

   /* -------------------------------------------------------
     0) UTILS
     ------------------------------------------------------- */
   /* Header on top of main content */
   #site-header {
     position: relative;
     z-index: 100;
   }

   .header-container {
     z-index: 100;
   }

   main {
     z-index: 1;
   }

   /* Lock scroll when menu is open */
   body:has(#site-header.open) {
     overflow: hidden;
   }

   /* -------------------------------------------------------
     1) TOP BAR
     ------------------------------------------------------- */
   .header-container {
     background: var(--background-horizontal-brand-gradient);
     height: var(--header-height-mobile);
     left: 0;
     position: fixed !important;
     right: 0;
     top: 0;
   }

   header {
     margin: 0 !important;
     padding-top: var(--header-height-mobile) !important;
   }

   /* -------------------------------------------------------
     2) BURGER BUTTON
     ------------------------------------------------------- */
   .menu-toggle {
     background: transparent;
     border: none;
     cursor: pointer;
     display: inline-flex !important;
     left: 0.5rem;
     position: absolute;
     top: 50%;
     transform: translateY(-50%);
   }

   .menu-toggle::after {
     content: "";
     inset: -18px;
     /* expand hit area */
     position: absolute;
   }

   .menu-icon {
     background: #e9efff;
     height: 2px;
     position: relative;
     width: 20px;
   }

   .menu-icon::before,
   .menu-icon::after {
     background: #e9efff;
     content: "";
     height: 2px;
     left: 0;
     position: absolute;
     transition: transform 0.3s ease;
     width: 20px;
   }

   .menu-icon::before {
     top: -6px;
   }

   .menu-icon::after {
     top: 6px;
   }

   #site-header.open .menu-icon {
     background: transparent;
   }

   #site-header.open .menu-icon::before {
     transform: rotate(45deg) translate(4px, 4px);
   }

   #site-header.open .menu-icon::after {
     transform: rotate(-45deg) translate(4px, -4px);
   }

   /* -------------------------------------------------------
     3) BRAND CENTERED
     ------------------------------------------------------- */
   .brand {
     flex: 1;
     /* span the bar width */
     position: relative;
     /* anchor for absolute children */
   }

   .brand .logo {
     display: block;
     left: 50%;
     position: absolute;
     top: 50%;
     transform: translate(-50%, -50%);
   }

   .header-actions {
     position: absolute;
     right: 0.6rem;
     top: 50%;
     transform: translateY(-50%);
   }

   /* -------------------------------------------------------
     4) ACTIONS
     ------------------------------------------------------- */
   /* Hide header CTA on mobile */
   .header-container .header-actions .external-link {
     display: none !important;
   }

   /* Keep login visible when panel is open */
   #site-header.open .header-actions .login-icon {
     display: inline-flex !important;
   }

   /* -------------------------------------------------------
     5) MENU PANEL
     ------------------------------------------------------- */
   .nav {
     background: var(--background-horizontal-brand-gradient);
     border-bottom-left-radius: 12px;
     border-bottom-right-radius: 12px;
     box-shadow: 0 12px 24px rgba(0, 0, 0, 0.35);
     left: 0 !important;
     opacity: 0;
     padding: 16px 20px 18px;
     pointer-events: none;
     position: absolute !important;
     right: 0 !important;
     top: var(--header-height-mobile) !important;
     transform: translateY(-8px);
     transition:
       opacity 0.25s ease,
       transform 0.25s ease,
       visibility 0s linear 0.25s;
     visibility: hidden;
     z-index: 110;
     /* panel above header content */
   }

   #site-header.open .nav {
     opacity: 1;
     pointer-events: auto;
     transform: translateY(0);
     transition:
       opacity 0.25s ease,
       transform 0.25s ease,
       visibility 0s;
     visibility: visible;
     /* visible immediately on open */
   }

   /* -------------------------------------------------------
     6) MENU LIST
     ------------------------------------------------------- */
   .nav ul {
     align-items: center !important;
     display: flex !important;
     flex-direction: column !important;
     gap: 12px !important;
     justify-content: flex-start !important;
     list-style: none;
     margin: 0;
     margin-inline: auto;
     padding: 0;
     width: 100%;
   }

   .nav li {
     display: flex;
     justify-content: center;
     width: 100%;
   }

   .nav a {
     -webkit-tap-highlight-color: transparent;
     align-items: center;
     border-radius: 10px;
     display: flex;
     font-size: 1.1rem;
     font-weight: 700;
     justify-content: center;
     line-height: 1.25;
     min-height: 44px;
     /* touch target */
     padding: 12px 16px;
     /* hit area */
     text-align: left;
     transition: var(--transition-link), background-color 0.2s ease;
     width: min(560px, 100%);
   }

   .nav a:focus-visible,
   .nav a:hover {
     background: rgba(102, 196, 255, 0.14);
     color: var(--color-text-main);
   }

   .nav a:active {
     background: rgba(102, 196, 255, 0.24);
     /* tap feedback */
   }

   /* -------------------------------------------------------
     7) CTA ITEM
     ------------------------------------------------------- */
   .nav li.cta {
     display: flex !important;
     margin-top: 10px;
     width: 100%;
   }

   .nav li.cta .external-link {
     border-radius: 10px !important;
     display: flex !important;
     justify-content: center;
     max-width: 560px;
     padding: 14px 20px !important;
     text-align: center !important;
     width: 100% !important;
   }

   /* -------------------------------------------------------
     8) CURRENT LINK (OVERLAY)
     ------------------------------------------------------- */
   .nav a[aria-current="page"] {
     background: rgba(102, 196, 255, 0.14);
     box-shadow: inset 0 0 0 2px rgba(102, 196, 255, 0.25);
     color: var(--color-text-main);
   }

   .nav a[aria-current="page"]:focus-visible,
   .nav a[aria-current="page"]:hover {
     background: rgba(102, 196, 255, 0.18);
   }

   /* Disable the thin underline in mobile */
   #site-header.open .nav a[aria-current="page"]::after {
     content: none;
   }

   /* -------------------------------------------------------
     9) HOME LINK FIX
     ------------------------------------------------------- */
   /* Highlight only when "Inicio" is the current page */
   .nav a[href="/"][aria-current="page"],
   .nav a[href="/index.html"][aria-current="page"] {
     background: rgba(102, 196, 255, 0.14);
     box-shadow: inset 0 0 0 2px rgba(102, 196, 255, 0.25);
     color: var(--color-text-main);
   }
 }